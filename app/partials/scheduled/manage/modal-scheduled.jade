include ../../mixins

form.form-horizontal(name='modal', ng-class='{setUnavailable:data.na,uglyGreenButton:isNew}')

    .modal-header.caps
        h3(ng-show='createData'): +icon('plus-circle', 'Create Class / Unavailability')

        h3(ng-hide='createData')
            +icon('edit' ,'Update')

            a#courseLink(
                href='https://www.my.af.mil/etcacourses/showcourse.asp?as_course_id={{data.Course.Number}}',
                bs-popover='"Click to view this course in ETCA"',
                target='_blank') &nbsp;{{data.Course.Number}}

        input.pull-right.form-control.hideSetUnavailable#ttms(
            type='text',
            ng-model='data.TTMS',
            placeholder='Class #',
            trigger='focus', bs-popover='language.scheduled_edit_ttms',
            placement='left')

    .modal-body

        .col-lg-6

            #instructorPhoto.col-lg-4: div(bio-photo='bioPhoto', style='width:150px;height:185px')

            .col-lg-8

                .row
                    ul.nav.nav-tabs#shortcuts

                        li Type
                        li.pull-right
                            select.form-control(
                                ng-disabled='!isNew',
                                ng-change='selectType()',
                                ng-model='recordType',
                                ng-options='o for o in recordTypes')

                .row(ng-show='data.mtt')
                    +formGroup('Location')
                        .input-group
                            .input-group-addon.w15:  +icon('location')
                            .input-group-selectize(trigger='focus', bs-popover='language.scheduled_edit_mtt', placement='right')
                                select(selectize='geodata', bind='data.MTT')

                .row(ng-if='data.ts')
                    +formGroup('TS Course')
                        .input-group
                            .input-group-addon.w15:  +icon('books')
                            input.form-control(ng-model='data.TS',trigger='focus', bs-popover='language.scheduled_edit_ts', placement='right')

                #courseSelector.row(ng-show='data.rc||data.mtt')
                    +formGroup('Course')
                        .input-group
                            .input-group-addon.w15:  +icon('books')
                            .input-group-selectize(trigger='focus', bs-popover='language.scheduled_edit_course', placement='right')
                                select(ng-disabled='!isNew',
                                        selectize='coursesDropdown',
                                        bind='data.CourseId',
                                        remember='course')

                .row
                    +formGroup('Instructor')

                        .input-group
                            .input-group-addon.w15: +icon('instructor')

                            .input-group-selectize(trigger='focus', bs-popover='language.scheduled_edit_instructor', placement='right')

                                select(selectize='instructorDropdown',
                                        bind='data.InstructorId',
                                        remember='instructor')

                .row(ng-if='!data.na')
                    +formGroup('Room')

                        .input-group
                            .input-group-addon.w15: +icon('building-o')

                            input.form-control(type='text',
                                                ng-model='data.Location',
                                                trigger='focus', bs-popover='language.scheduled_edit_location',
                                                placement='right')

                .row(ng-if='data.na')
                    +formGroup('Details')
                        .input-group
                            textarea.form-control(type='text',
                                                    ng-model='data.ClassNotes',
                                                    trigger='focus', bs-popover='language.scheduled_edit_na_notes',
                                                    placement='right')

                .row(ng-if='!data.na')
                    +formGroup('Length')

                        .input-group.pull-left.w40
                            .form-control(style='background: #fafafa;cursor: not-allowed;') {{data.Course.Days}}
                            .input-group-addon Academic Days

                        .input-group.pull-right.w40
                            input.form-control(ng-model='data.Hours',
                                                type='number',
                                                min='0',
                                                trigger='focus', bs-popover='language.scheduled_edit_hours_deviation',
                                                placeholder='{{data.Course.Hours}}',
                                                placement='top')
                            .input-group-addon Hours


                .row.hideSetUnavailable
                    +formGroup('Reserved')

                        .input-group.pull-left.w40

                            input.form-control(ng-model='data.Host',
                                                type='number',
                                                min='0',
                                                required,
                                                trigger='focus', bs-popover='language.scheduled_edit_reserved',
                                                placement='top')
                            .input-group-addon Host

                        .input-group.pull-right.w40

                            input.form-control(ng-model='data.Other',
                                                type='number',
                                                min='0',
                                                required,
                                                trigger='focus', bs-popover='language.scheduled_edit_reserved',
                                                placement='top')
                            .input-group-addon Non-Host

                #modalScheduledOpenSeats(ng-show='data.CourseId')
                    strong {{getOpenSeats()}}&nbsp;
                    span ({{data.Course.Min}} Min / {{data.Course.Max}} Max)

            .clearfix

            hr(style='margin-top:5px')

            .hideSetUnavailable
                +formGroup('Notes')
                    .input-group
                        textarea.form-control(type='text',
                                                ng-model='data.ClassNotes',
                                                style='height:150px',
                                                trigger='focus', bs-popover='language.scheduled_edit_notes',
                                                placement='right')

            .hideSetUnavailable

                div(ng-if='data.J4Notes')
                    +formGroup('J4 Notes')
                        #j4notes.input-group.italics {{data.J4Notes}}


        #rightPanel.col-lg-6(bs-tabs)

            div(ng-class='{addEvent:data.CourseId||data.na||data.TS}', bs-pane, title='Instructor Schedule')

                br

                #instructorCalendar(ui-calendar, ng-model='eventsInstructor')

                .text-info.info.italics.pull-right
                    +icon('info-circle', 'Click on a day to choose the start date, drag or resize the course to update.')

            div.hideSetUnavailable(bs-pane, title='Registered Students ({{data.Approved || 0}})')

                br

                div(edit-students, templateURL='embed')

        .clearfix

    +modalFooter('Submit', '!data.Start || !data.Days')

    #cancelClass.btn.btn-danger.btn-labeled.white.hideSetUnavailable(bs-popover,
                                    placement='right',
                                    ng-if='!createData && !data.Archived',
                                    template='/partials/popover-cancel-class.html')

                span.btn-label: +icon('trash_hide')
                span Cancel Class